

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Controller &#8212; PySeqsee 0.2.3a1 documentation</title>
    
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.3a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Run-mode" href="run_mode.html" />
    <link rel="prev" title="Main" href="main.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="run_mode.html" title="Run-mode"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="main.html" title="Main"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PySeqsee 0.2.3a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="developer_index.html" accesskey="U">Core Developer Documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.jpg" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="main.html"
                        title="previous chapter">Main</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="run_mode.html"
                        title="next chapter">Run-mode</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="controller">
<h1>Controller<a class="headerlink" href="#controller" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="farg.core.controller.Controller">
<em class="property">class </em><code class="descclassname">farg.core.controller.</code><code class="descname">Controller</code><span class="sig-paren">(</span><em>*</em>, <em>ui</em>, <em>controller_depth=0</em>, <em>parent_controller=None</em>, <em>workspace_arguments=None</em>, <em>stopping_condition=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/farg/core/controller.html#Controller"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#farg.core.controller.Controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Purely mechanical (read &#8220;dumb&#8221;) loop to control entire app or individual subspaces.</p>
<p>Each subspace gets its own controller.</p>
<p>Each controller has its own coderack, stream, long-term memory, and workspace. These may be
accessed thus, respectively:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">coderack</span>
<span class="bp">self</span><span class="o">.</span><span class="n">stream</span>
<span class="bp">self</span><span class="o">.</span><span class="n">ltm</span>
<span class="bp">self</span><span class="o">.</span><span class="n">workspace</span>
</pre></div>
</div>
<p><strong>Customizing the controller class</strong></p>
<p>A controller is an instance of a subclass of <a class="reference internal" href="#farg.core.controller.Controller" title="farg.core.controller.Controller"><code class="xref py py-class docutils literal"><span class="pre">Controller</span></code></a>.
It is possible to configure the controller in a number of ways. Before we look at the
configuration, here is a brief outline of the main function provided by the controller,
namely, <a class="reference internal" href="#farg.core.controller.Controller.Step" title="farg.core.controller.Controller.Step"><code class="xref py py-meth docutils literal"><span class="pre">Step()</span></code></a>.</p>
<p>A step involves choosing a codelet from the coderack and running it. The codelet has access
to each of the components owned by the controller (namely, the coderack, stream, ltm, and
workspace). The action of the codelet can have any number of effects including the creation
of more codelets, directing the application&#8217;s attention somewhere (a notion explored later
when we look at streams), create structures in the workspace, or extend the LTM or pump
activation into some concept.</p>
<p>Furthermore, after each step, more codelets are probabilistically added to the coderack.
The class variable <a class="reference internal" href="#farg.core.controller.Controller.routine_codelets_to_add" title="farg.core.controller.Controller.routine_codelets_to_add"><code class="xref py py-attr docutils literal"><span class="pre">routine_codelets_to_add</span></code></a>
contains 3-tuples (class, urgency, probability) specifying the class of the new codelet,
its urgency, and the probability with which to add it.</p>
<p>In the next few paragraphs, we will look at customizing a hypothetical controller called
Foo. Its code will begin thus:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">farg</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">Controller</span><span class="p">):</span>
  <span class="o">...</span>  <span class="c1"># customization here</span>
</pre></div>
</div>
<p>The simplest customization is to specify codelets to be added after each step:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">farg</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">Controller</span><span class="p">):</span>
  <span class="n">routine_codelets_to_add</span> <span class="o">=</span> <span class="p">((</span><span class="n">CodeletFamilyBar</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>  <span class="c1"># 30 is the urgency, 0.3 probability of adding.</span>
                             <span class="p">(</span><span class="n">CodeletFamilyBat</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">))</span>
</pre></div>
</div>
<p>Another customization is to use a non-default class for the coderack or the stream. This
should in general not be required, and the default classes
<a class="reference internal" href="coderack.html#farg.core.coderack.Coderack" title="farg.core.coderack.Coderack"><code class="xref py py-class docutils literal"><span class="pre">Coderack</span></code></a> and <a class="reference internal" href="stream.html#farg.core.stream.Stream" title="farg.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a> should be
adequate. But the customization is available if needed. No argument is passed to the
constructor of these classes to create the coderack or the stream:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">farg</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">Controller</span><span class="p">):</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">coderack_class</span> <span class="o">=</span> <span class="n">SomeClass</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">stream_class</span> <span class="o">=</span> <span class="n">SomeOtherClass</span>
</pre></div>
</div>
<p>The workspace class can be specified as follows. If it is not Null, it will be initialized
with a dictionary that is passed in the workspace_arguments argument of the controller&#8217;s
constructor:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">workspace_class</span> <span class="o">=</span> <span class="n">YetAnotherClass</span>  <span class="c1"># Default: None</span>
</pre></div>
</div>
<p>The LTM&#8217;s name can be specified as below. The LTM manager will be used to load this (if not
already loaded) and to initialize it if it is empty:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">ltm_name</span> <span class="o">=</span> <span class="s1">&#39;LtmName&#39;</span>  <span class="c1"># Default: None</span>
</pre></div>
</div>
<p><strong>The UI</strong></p>
<p>A UI can be graphical or not. At any time, at most one UI is active, and it is shared by
all controllers. It can be accessed as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span>  <span class="c1"># Points to the UI (usually a GUI).</span>
</pre></div>
</div>
<p>The UI provides the important method called <code class="xref py py-meth docutils literal"><span class="pre">AskQuestion()</span></code>.
This can be used by the controller to ask for confirmation of the answer, for instance. In
case of a graphical UI, this could result in the user being asked the question. In other
cases (such as in automated testing), the UI may be given enough knowledge to answer the
question itself. See the UI documentation for details.</p>
<p><strong>The Stopping Condition</strong></p>
<p>It is possible to specify a stopping condition for a controller. This is useful for testing
when weighing a potential change. When contemplating the change, it is useful to see how
long it takes with the change and without the change until some significant event occurs
(such as the discovery of the answer, for instance). This will be discussed elsewhere.</p>
<p><strong>The Constructor</strong></p>
<p>The constructor takes the following named arguments:</p>
<blockquote>
<div><ul class="simple">
<li>ui (required)</li>
<li>controller_depth. The top controller has depth 0, its subspaces have
depth 1, and so forth. The default is 0.</li>
<li>parent_controller. If present, it points to the controller that created this
subspace. Defaults to None (which indicates a top-level controller).</li>
<li>workspace_arguments. If present, this should be a dict() and will be used to
initialize the workspace.</li>
<li>stopping_condition. If present, this should be a function that takes the controller
as the only input and returns true or false.</li>
</ul>
</div></blockquote>
<dl class="method">
<dt id="farg.core.controller.Controller.AddCodelet">
<code class="descname">AddCodelet</code><span class="sig-paren">(</span><em>*</em>, <em>family</em>, <em>urgency</em>, <em>arguments_dict=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/farg/core/controller.html#Controller.AddCodelet"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#farg.core.controller.Controller.AddCodelet" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a codelet to the coderack.</p>
<dl class="docutils">
<dt>Keyword-only Args:</dt>
<dd><dl class="first last docutils">
<dt>family:</dt>
<dd>Family of codelet. Subclass of <a class="reference internal" href="codelets.html#farg.core.codelet.CodeletFamily" title="farg.core.codelet.CodeletFamily"><code class="xref py py-class docutils literal"><span class="pre">CodeletFamily</span></code></a>.</dd>
<dt>urgency:</dt>
<dd>Number between 0 and 100 indicating urgency.</dd>
<dt>arguments_dict:</dt>
<dd>A dictionary of extra arguments to pass to the codelet. See details in the
documentation of <a class="reference internal" href="codelets.html#farg.core.codelet.CodeletFamily" title="farg.core.codelet.CodeletFamily"><code class="xref py py-class docutils literal"><span class="pre">CodeletFamily</span></code></a>.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="farg.core.controller.Controller.RunUptoNSteps">
<code class="descname">RunUptoNSteps</code><span class="sig-paren">(</span><em>n_steps</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/farg/core/controller.html#Controller.RunUptoNSteps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#farg.core.controller.Controller.RunUptoNSteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes up to N steps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>n_steps</strong> &#8211; Number of steps to take. Steps taken by subspaces created by this controller
are not counted.</td>
</tr>
</tbody>
</table>
<p>In these, it is possible that an answer is found and an exception raised.</p>
</dd></dl>

<dl class="method">
<dt id="farg.core.controller.Controller.Step">
<code class="descname">Step</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/farg/core/controller.html#Controller.Step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#farg.core.controller.Controller.Step" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the next (stochastically chosen) step in the model.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.coderack">
<code class="descname">coderack</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.coderack" title="Permalink to this definition">¶</a></dt>
<dd><p>The coderack.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.coderack_class">
<code class="descname">coderack_class</code><a class="headerlink" href="#farg.core.controller.Controller.coderack_class" title="Permalink to this definition">¶</a></dt>
<dd><p>What type of coderack is owned by the controller. Defaults to
<a class="reference internal" href="coderack.html#farg.core.coderack.Coderack" title="farg.core.coderack.Coderack"><code class="xref py py-class docutils literal"><span class="pre">Coderack</span></code></a>.</p>
<p>alias of <code class="xref py py-class docutils literal"><span class="pre">Coderack</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.controller_depth">
<code class="descname">controller_depth</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.controller_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>How deeply in the stack this controller is. The top-level controller has a depth
of 0, Subspaces it spawns 1, and so forth.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.ltm">
<code class="descname">ltm</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.ltm" title="Permalink to this definition">¶</a></dt>
<dd><p>LTM, if any</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.ltm_name">
<code class="descname">ltm_name</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.ltm_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of LTM used by the controller. If None, no LTM is created.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.parent_controller">
<code class="descname">parent_controller</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.parent_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>If this is a controller of a subspace, this points to parent_controller.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.routine_codelets_to_add">
<code class="descname">routine_codelets_to_add</code><em class="property"> = ()</em><a class="headerlink" href="#farg.core.controller.Controller.routine_codelets_to_add" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a list containing 3-tuples made up of (family, urgency, probability).
The probability is ignored during a Step if the coderack is empty.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.steps_taken">
<code class="descname">steps_taken</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.steps_taken" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of steps taken</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.stopping_condition">
<code class="descname">stopping_condition</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.stopping_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Stopping condition (for SxS and batch modes).</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.stream">
<code class="descname">stream</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>The stream.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.stream_class">
<code class="descname">stream_class</code><a class="headerlink" href="#farg.core.controller.Controller.stream_class" title="Permalink to this definition">¶</a></dt>
<dd><p>What type of stream is owned by the controller. Defaults to
<a class="reference internal" href="stream.html#farg.core.stream.Stream" title="farg.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a></p>
<p>alias of <code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.ui">
<code class="descname">ui</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.ui" title="Permalink to this definition">¶</a></dt>
<dd><p>The UI running this controller. May be a GUI or a Guided UI (which knows how to
answer questions that&#8217;d normally be answered by a user in a GUI). Any subspace
spawned by this space shall inherit the ui.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.workspace">
<code class="descname">workspace</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.workspace" title="Permalink to this definition">¶</a></dt>
<dd><p>Workspace, constructed if workspace_class is defined. The workspace is constructed
using workspace_arguments.</p>
</dd></dl>

<dl class="attribute">
<dt id="farg.core.controller.Controller.workspace_class">
<code class="descname">workspace_class</code><em class="property"> = None</em><a class="headerlink" href="#farg.core.controller.Controller.workspace_class" title="Permalink to this definition">¶</a></dt>
<dd><p>What type of workspace is owned by the controller. With None, gets no workspace.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="run_mode.html" title="Run-mode"
             >next</a> |</li>
        <li class="right" >
          <a href="main.html" title="Main"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PySeqsee 0.2.3a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="developer_index.html" >Core Developer Documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011, 2012, Abhijit Mahabal.
      Last updated on Jan 13, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>