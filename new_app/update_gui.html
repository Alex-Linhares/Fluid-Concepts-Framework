

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Update the GUI &#8212; PySeqsee 0.2.3a1 documentation</title>
    
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.3a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Creating the first codelet" href="first_codelet.html" />
    <link rel="prev" title="Update Workspace" href="update_workspace.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="first_codelet.html" title="Creating the first codelet"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="update_workspace.html" title="Update Workspace"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PySeqsee 0.2.3a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="new_app_index.html" accesskey="U">Creating a new app</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.jpg" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="update_workspace.html"
                        title="previous chapter">Update Workspace</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="first_codelet.html"
                        title="next chapter">Creating the first codelet</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="update-the-gui">
<h1>Update the GUI<a class="headerlink" href="#update-the-gui" title="Permalink to this headline">Â¶</a></h1>
<p>The inputs do not yet show up in the UI. Let&#8217;s fix that.</p>
<p>The UI is implemented in <a class="reference external" href="https://docs.python.org/3.4/library/tkinter.html#module-tkinter" title="(in Python v3.4)"><code class="xref py py-mod docutils literal"><span class="pre">tkinter</span></code></a>, and all components are drawn on a <code class="xref py py-class docutils literal"><span class="pre">tkinter.Canvas</span></code>.
Depending on the selected view (something you can change using the menu at the top left), the full
canvas or only a fraction of it is alloted to the workspace view.</p>
<p>The default view (generated by &#8220;farg create&#8221;) just displays a &#8220;hello, world&#8221; message. To produce
something more useful, we will modify the file farg/apps/bongard/gui/workspace_view.py, which
currently contains the placeholder method ReDraw:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">WorkspaceView</span><span class="p">(</span><span class="n">ViewPort</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">ReDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controller</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Redraw the workspace if it is being displayed. This is not called otherwise.</span>

<span class="sd">    The attributes that you have access to include self.width, self.height and a method to</span>
<span class="sd">    convert this widget&#39;s coordinates to the full canvas coordinates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">workspace</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">workspace</span>

    <span class="c1"># EDIT-ME: You&#39;d want to add something real here.</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CanvasCoordinates</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Hello, World!&#39;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="n">NW</span><span class="p">)</span>
</pre></div>
</div>
<p>We will replace this method to display the items in two columns, leaving space for other details we
may need to display later. We will space items out so that the bigger set uses the full height of the
canvas window:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">WorkspaceView</span><span class="p">(</span><span class="n">ViewPort</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">ReDraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controller</span><span class="p">):</span>
    <span class="n">workspace</span> <span class="o">=</span> <span class="n">controller</span><span class="o">.</span><span class="n">workspace</span>

    <span class="n">bigger_set_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">workspace</span><span class="o">.</span><span class="n">left_items</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">workspace</span><span class="o">.</span><span class="n">right_items</span><span class="p">))</span>
    <span class="n">space_per_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="p">(</span><span class="n">bigger_set_size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">x_offset_for_left_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.2</span>
    <span class="n">x_offset_for_right_set</span> <span class="o">=</span> <span class="n">x_offset_for_left_set</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">workspace</span><span class="o">.</span><span class="n">left_items</span><span class="p">):</span>
      <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CanvasCoordinates</span><span class="p">(</span><span class="n">x_offset_for_left_set</span><span class="p">,</span> <span class="p">(</span><span class="n">idx</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="n">space_per_element</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span>
          <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">element</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span>
          <span class="n">font</span><span class="o">=</span><span class="s1">&#39;-adobe-helvetica-bold-r-normal--28-140-100-100-p-105-iso8859-4&#39;</span><span class="p">,</span>
          <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#0000FF&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">workspace</span><span class="o">.</span><span class="n">right_items</span><span class="p">):</span>
      <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">CanvasCoordinates</span><span class="p">(</span><span class="n">x_offset_for_right_set</span><span class="p">,</span> <span class="p">(</span><span class="n">idx</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="n">space_per_element</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span>
          <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">element</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span>
          <span class="n">font</span><span class="o">=</span><span class="s1">&#39;-adobe-helvetica-bold-r-normal--28-140-100-100-p-105-iso8859-4&#39;</span><span class="p">,</span>
          <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#00FF00&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The methods to pay attention to here include:</p>
<ul class="simple">
<li>self.height and self.width, which are the sizes of the part of the canvas available for the
workspace. This amount can change depending on the view: it is possible to display the workspace,
coderack, and stream at once, for example.</li>
<li>The top left corner has the virtual co-ordinate (0, 0), and the bottom right has (self.width, self.height)</li>
<li>The method CanvasCoordinates() converts the virtual coordinates to those on the actual canvas.</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="first_codelet.html" title="Creating the first codelet"
             >next</a> |</li>
        <li class="right" >
          <a href="update_workspace.html" title="Update Workspace"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PySeqsee 0.2.3a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="new_app_index.html" >Creating a new app</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011, 2012, Abhijit Mahabal.
      Last updated on Jan 16, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>