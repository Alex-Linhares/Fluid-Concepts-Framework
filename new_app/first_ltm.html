

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Long-term memory &#8212; PySeqsee 0.2.3a1 documentation</title>
    
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.3a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Focusing and “the attention economy”" href="focusing.html" />
    <link rel="prev" title="First Categories" href="first_categories.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="focusing.html" title="Focusing and “the attention economy”"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="first_categories.html" title="First Categories"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PySeqsee 0.2.3a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="new_app_index.html" accesskey="U">Creating a new app</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.jpg" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Long-term memory</a><ul>
<li><a class="reference internal" href="#the-graph">The graph</a></li>
<li><a class="reference internal" href="#preparing-a-class-to-be-storable">Preparing a class to be storable</a><ul>
<li><a class="reference internal" href="#subclassing-from-ltmstorablemixin">Subclassing from LTMStorableMixin</a></li>
<li><a class="reference internal" href="#associating-ltm-objects-with-workspace-objects">Associating LTM objects with workspace objects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#accessing-the-nodes-in-the-graph">Accessing the nodes in the graph</a></li>
<li><a class="reference internal" href="#subtleties-not-yet-touched-here">Subtleties not yet touched here</a></li>
<li><a class="reference internal" href="#initializing-the-graph">Initializing the graph</a><ul>
<li><a class="reference internal" href="#the-ltm-manager">The LTM Manager</a></li>
<li><a class="reference internal" href="#initial-setup-for-bongard">Initial setup for Bongard</a></li>
<li><a class="reference internal" href="#when-the-app-is-run">When the app is run</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="first_categories.html"
                        title="previous chapter">First Categories</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="focusing.html"
                        title="next chapter">Focusing and &#8220;the attention economy&#8221;</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="long-term-memory">
<h1>Long-term memory<a class="headerlink" href="#long-term-memory" title="Permalink to this headline">¶</a></h1>
<p>We continue our foray into the mechanics of doing things in PySeqsee while temporarily setting aside
cognitive considerations. We will take a look at the long-term memory.</p>
<div class="section" id="the-graph">
<h2>The graph<a class="headerlink" href="#the-graph" title="Permalink to this headline">¶</a></h2>
<p>The long-term memory in PySeqsee is a graph, whose nodes are individual concepts. There is no
restriction on what the concepts may be&#8212;anything implementing a particular interface
(<a class="reference internal" href="../developer/ltm.html#farg.core.ltm.storable.LTMStorableMixin" title="farg.core.ltm.storable.LTMStorableMixin"><code class="xref py py-class docutils literal"><span class="pre">LTMStorableMixin</span></code></a>) is welcome.</p>
<p>All categories, being instances of <a class="reference internal" href="../developer/categories.html#farg.core.categorization.category.Category" title="farg.core.categorization.category.Category"><code class="xref py py-class docutils literal"><span class="pre">Category</span></code></a>, subclass
from the LTMStorableMixin, and are therefore ready to be stored in the graph.</p>
</div>
<div class="section" id="preparing-a-class-to-be-storable">
<h2>Preparing a class to be storable<a class="headerlink" href="#preparing-a-class-to-be-storable" title="Permalink to this headline">¶</a></h2>
<div class="section" id="subclassing-from-ltmstorablemixin">
<h3>Subclassing from LTMStorableMixin<a class="headerlink" href="#subclassing-from-ltmstorablemixin" title="Permalink to this headline">¶</a></h3>
<p>We will begin by creating a class to hold integers that we will be storing in the LTM. We will put
this class in farg/apps/bongard/workspace.py, where we also have IntegerObject, which stores each
item in the input.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">farg.core.ltm.storable</span> <span class="k">import</span> <span class="n">LTMStorableMixin</span>
<span class="kn">from</span> <span class="nn">farg.core.meta</span> <span class="k">import</span> <span class="n">MemoizedConstructor</span>

<span class="k">class</span> <span class="nc">PlatonicInteger</span><span class="p">(</span><span class="n">LTMStorableMixin</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">MemoizedConstructor</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Integer in long-term memory.</span>

<span class="sd">  Holds an integer that can be stored in LTM (and about which we can store information such as</span>
<span class="sd">  remembered categories.&quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">magnitude</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span> <span class="o">=</span> <span class="n">magnitude</span>

  <span class="k">def</span> <span class="nf">BriefLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">&#39;Platonic </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span>
</pre></div>
</div>
<p>A fair question to ask is why we do not just reuse IntegerObject for this purpose. The answer is twofold.
First, the two are conceptually different and will hold different pieces of information. The version
used for LTM (i.e., PlatonicInteger) will store what has been remembered about an integer from prior runs, whereas the
the version for storing in the workspace (i.e., IntegerObject) will hold what has been seen in the
current run and information about similarities to objects seen in this problem. Second, we want a
single integer &#8220;3&#8221; in the long term memory, but multiple copies of &#8220;3&#8221; may be needed in the workspace
since we may not only have &#8220;3&#8221; explicitly in the input, it may sneak in in other places, as would
happen if one side is made up of cubic numbers such as 1, 8, and 27 and we see these as the third powers.</p>
<p>The metaclass <a class="reference internal" href="../developer/sundry.html#farg.core.meta.MemoizedConstructor" title="farg.core.meta.MemoizedConstructor"><code class="xref py py-class docutils literal"><span class="pre">MemoizedConstructor</span></code></a> ensures that repeated calls to
the constructor of PlatonicInteger return the same object.</p>
</div>
<div class="section" id="associating-ltm-objects-with-workspace-objects">
<h3>Associating LTM objects with workspace objects<a class="headerlink" href="#associating-ltm-objects-with-workspace-objects" title="Permalink to this headline">¶</a></h3>
<p>But we still need to relate IntegerObject instances to PlatonicInteger objects. That is, when we
see a &#8220;3&#8221; in the input, we need a way to connect to the &#8220;3&#8221; in the LTM. We do this by subclassing
IntegerObject from LTMStorableMixin, but defining the GetLTMStorableContent method to return a
platonic integer:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">IntegerObject</span><span class="p">(</span><span class="n">CategorizableMixin</span><span class="p">,</span> <span class="n">LTMStorableMixin</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Holds one item in either set, along with any book-keeping information.&quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">magnitude</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span> <span class="o">=</span> <span class="n">magnitude</span>

  <span class="k">def</span> <span class="nf">GetLTMStorableContent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">PlatonicInteger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="accessing-the-nodes-in-the-graph">
<h2>Accessing the nodes in the graph<a class="headerlink" href="#accessing-the-nodes-in-the-graph" title="Permalink to this headline">¶</a></h2>
<p>Given an LTM graph, we can get the nodes associated with some content (i.e., an instance of LTMStorableContent)
thus:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># graph holds the graph.</span>
<span class="c1"># i7 holds IntegerObject(7), and pi7 holds a PlatonicInteger(7)</span>
<span class="n">node</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">GetNodeForContent</span><span class="p">(</span><span class="n">i7</span><span class="p">)</span>
<span class="n">node2</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">GetNodeForContent</span><span class="p">(</span><span class="n">pi7</span><span class="p">)</span>
<span class="c1"># node == node2</span>
</pre></div>
</div>
</div>
<div class="section" id="subtleties-not-yet-touched-here">
<h2>Subtleties not yet touched here<a class="headerlink" href="#subtleties-not-yet-touched-here" title="Permalink to this headline">¶</a></h2>
<p>We have not yet described what the method LTMDepenedentContent of LTMStorableMixin does. It is
concerned with storing complex nodes whose definition depends upon other nodes.</p>
<div class="sidebar">
<p class="first sidebar-title">Why is this so complex?</p>
<p>The range of pitfalls in implementing a long-term memory are many, and I will illustrate this with
an example. Consider wanting to store the category &#8220;Even squares&#8221;, which has been defined, let us say,
as the intersection of the categories &#8220;Even&#8221; and &#8220;Square&#8221;.</p>
<p>We would like to be able to store this category in the graph and dump the ltm into a file. Without
the storage to a file, we are restricted to the life span of a single run, and this can hardly be termed
&#8220;long&#8221;. In a subsequent run, we would also like to resuscitate the category (why else would one store
it otherwise?)</p>
<p>But our category is defined in terms of two other categories, and we would need to store these as
well. All dependencies of a node that is stored also themselves need to be stored.</p>
<p class="last">The Python standard module <a class="reference external" href="https://docs.python.org/3.4/library/pickle.html#module-pickle" title="(in Python v3.4)"><code class="xref py py-mod docutils literal"><span class="pre">pickle</span></code></a> is intended for use in such cases, and it is part of the
solution used here.</p>
</div>
</div>
<div class="section" id="initializing-the-graph">
<h2>Initializing the graph<a class="headerlink" href="#initializing-the-graph" title="Permalink to this headline">¶</a></h2>
<p>When the application is run multiple times and sees a range of input problems, the long-term memory
gradually becomes richer. But even at the beginning, it is useful to start off with at least a few
elements, and this is achieved by an initializer.</p>
<div class="section" id="the-ltm-manager">
<h3>The LTM Manager<a class="headerlink" href="#the-ltm-manager" title="Permalink to this headline">¶</a></h3>
<p>Instead of having a giant graph of all nodes, PySeqsee has opted for one LTM per subspace (a subspace
is related to the notion of a mental space from cognitive science). Each such LTM has a name, and an
<a class="reference internal" href="../developer/ltm.html#farg.core.ltm.manager.LTMManager" title="farg.core.ltm.manager.LTMManager"><code class="xref py py-class docutils literal"><span class="pre">LTMManager</span></code></a> manages these.</p>
<p>It loads graphs from disk on demand, when GetLTM(name) is called. That call loads the file if it has
not already been loaded. If the file does not exist, but an initializer has been defined, then that
is called to set up the initial nodes.</p>
</div>
<div class="section" id="initial-setup-for-bongard">
<h3>Initial setup for Bongard<a class="headerlink" href="#initial-setup-for-bongard" title="Permalink to this headline">¶</a></h3>
<p>When the app skeleton was created, hooks for initializing the LTM were already in place, in the file
farg/apps/bongard/controller.py:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">kLTMName</span> <span class="o">=</span> <span class="s1">&#39;bongard.main&#39;</span>

<span class="k">def</span> <span class="nf">InitializeBongardLTM</span><span class="p">(</span><span class="n">ltm</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Called if ltm was empty (had no nodes).&quot;&quot;&quot;</span>
  <span class="k">pass</span>

<span class="n">LTMManager</span><span class="o">.</span><span class="n">RegisterInitializer</span><span class="p">(</span><span class="n">kLTMName</span><span class="p">,</span> <span class="n">InitializeBongardLTM</span><span class="p">)</span>
</pre></div>
</div>
<p>Let&#8217;s add some nodes to that graph, and a few edges. We will add nodes corresponding to the integers
0 through 9, a node for the category &#8220;Square&#8221;, and edges between four of those nodes and this
category node. That edge will be marked as connecting instance to category:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">InitializeBongardLTM</span><span class="p">(</span><span class="n">ltm</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Called if ltm was empty (had no nodes).&quot;&quot;&quot;</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">ltm</span><span class="o">.</span><span class="n">GetNodeForContent</span><span class="p">(</span><span class="n">PlatonicInteger</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
    <span class="n">ltm</span><span class="o">.</span><span class="n">AddEdgeBetweenContent</span><span class="p">(</span><span class="n">PlatonicInteger</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">Square</span><span class="p">(),</span>
                              <span class="n">LTMEdge</span><span class="o">.</span><span class="n">LTM_EDGE_TYPE_ISA</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="when-the-app-is-run">
<h3>When the app is run<a class="headerlink" href="#when-the-app-is-run" title="Permalink to this headline">¶</a></h3>
<p>When the app is run (via the &#8220;farg run bongard&#8221; command), a file will show up in the persistent
directory (which, by default, is the directory .pyseqsee in your home directory but can be changed
via the persistent_directory flag&#8212;see farg_flags.py). By default, then, you should expect to see
a file at ~/.pyseqsee/bongard/ltm/bongard.main.</p>
<p>To see the content of this LTM, use this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">farg</span> <span class="n">ltm</span> <span class="n">bongard</span> <span class="n">bongard</span><span class="o">.</span><span class="n">main</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="focusing.html" title="Focusing and “the attention economy”"
             >next</a> |</li>
        <li class="right" >
          <a href="first_categories.html" title="First Categories"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">PySeqsee 0.2.3a1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="new_app_index.html" >Creating a new app</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011, 2012, Abhijit Mahabal.
      Last updated on Jan 16, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>